<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>DWAS Alert Radar</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}" />

    <!-- Open Graph / Discord Embed -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="DWAS Alert Radar" />
    <meta property="og:description"
          content="Live DWAS (Doge's Weather Analysis System) radar with real-time NWS alerts, polygons, and audio warnings." />
    <meta property="og:image"
          content="https://YOUR-DOMAIN-HERE.onrender.com/static/share_card.png" />
    <meta property="og:url" content="https://YOUR-DOMAIN-HERE.onrender.com/" />
    <meta name="theme-color" content="#5c4bff" />

    <!-- Twitter Cards (extra â€“ helps Discord too) -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="DWAS Alert Radar" />
    <meta name="twitter:description" content="Live DWAS radar with real-time NWS alerts and storm polygons." />
    <meta name="twitter:image"
          content="https://YOUR-DOMAIN-HERE.onrender.com/static/share_card.png" />

    <!-- Leaflet CSS -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin="" />

    <!-- App CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>

<body>

    <!-- Top Rotating Alert Banner -->
    <div id="headline-bar">
        <div id="headline-text">Loading current alerts from NWS...</div>
        <div id="headline-metric">
            <span id="headline-metric-label">ALERTS</span>
            <span id="headline-metric-value">--</span>
        </div>
    </div>

    <!-- Main Layout -->
    <div id="main-layout" class="layout-no-panel">

        <!-- Left: Alert Information Panel -->
        <div id="alert-panel" class="panel-hidden">
            <button id="alert-close-btn" title="Close">&times;</button>

            <div id="alert-type">NO ACTIVE ALERTS</div>
            <div id="alert-expiration">Expires: --</div>

            <div id="alert-stats-row">
                <div class="alert-stat-box">
                    <div class="stat-label">SEVERITY</div>
                    <div class="stat-value" id="stat-severity">--</div>
                </div>
                <div class="alert-stat-box">
                    <div class="stat-label">URGENCY</div>
                    <div class="stat-value" id="stat-urgency">--</div>
                </div>
                <div class="alert-stat-box">
                    <div class="stat-label">CERTAINTY</div>
                    <div class="stat-value" id="stat-certainty">--</div>
                </div>
            </div>

            <div class="alert-section">
                <div class="section-title">AREAS</div>
                <div class="section-body" id="alert-areas">--</div>
            </div>

            <div class="alert-section">
                <div class="section-title">WHAT</div>
                <div class="section-body" id="alert-headline">--</div>
            </div>

            <div class="alert-section">
                <div class="section-title">DETAILS</div>
                <div class="section-body" id="alert-description">--</div>
            </div>

            <div class="alert-section">
                <div class="section-title">INSTRUCTIONS</div>
                <div class="section-body" id="alert-instruction">--</div>
            </div>

            <div class="alert-footer">
                <span id="alert-effective">Effective: --</span>
                <span id="alert-sender">Source: --</span>
            </div>
        </div>

        <!-- Right: Radar View -->
        <div id="map-panel">
            <div id="radar-header">
                <div id="radar-title">DWAS ALERT RADAR</div>

                <div id="radar-time">
                    <span id="radar-clock">--:--:--</span>
                    <span id="radar-tz">LOCAL</span>
                </div>
            </div>

            <div id="map"></div>

            <!-- Alert Severity Legend -->
            <div id="map-legend">
                <div class="legend-title">Alert Severity</div>

                <div class="legend-row">
                    <span class="legend-color legend-extreme"></span>
                    <span>Extreme</span>
                </div>

                <div class="legend-row">
                    <span class="legend-color legend-severe"></span>
                    <span>Severe</span>
                </div>

                <div class="legend-row">
                    <span class="legend-color legend-moderate"></span>
                    <span>Moderate</span>
                </div>

                <div class="legend-row">
                    <span class="legend-color legend-minor"></span>
                    <span>Minor</span>
                </div>

                <div class="legend-row">
                    <span class="legend-color legend-unknown"></span>
                    <span>Unknown/Other</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Warning Sound -->
    <audio id="warn-sound" preload="auto">
        <source src="{{ url_for('static', filename='warn_sound.m4a') }}" type="audio/mp4" />
        Your browser does not support audio.
    </audio>

    <!-- Leaflet JS -->
    <script
        src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>

    <!-- App JS -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>

</body>
</html>
